<!doctype html>
<html lang="en">
{% load static from staticfiles %}

<head>
<title>{% block title %}wotmad{% endblock %}</title>
<link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
<link type="text/css" rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.min.css">
<link type="text/css" rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/select2/3.4.1/select2.min.css">
{% block stylesheets %}{% endblock %}
</head>

<body class="{% block bodyclass %}container {% endblock %}">
  {% block outer %}
    {% block userinfo %}
      <div class="span12">
      </div>
    {% endblock %}

    <header class="subhead">
      <h1>wotmad</h1>

      <div class="navbar navbar-inverse">
        <div class="navbar-inner">
          <div class="container">
            {% block mainnav %}
              <ul class="nav">
                <li><a href="{% url home %}">home</a></li>
                <li><a href="{% url artofwar:list %}">art of war</a></li>
                <li><a href="{% url scripts:list %}">scripts</a></li>
                <li><a href="{% url stats:list %}">stats</a></li>
                <li><a href="#">misc</a></li>
                <li><a href="#">?</a></li>
              </ul>
            {% endblock %}
            <ul class="nav pull-right">
              <li class="divider-vertical"></li>
              <li>
              {% if not user.is_authenticated %}
                <a id="browserid" href="#">login / register</a>
                <form method="POST" id="login-form" action="{% url accounts:verify %}">
                  {% csrf_token %}
                  {{ browserid_form.as_p }}
                </form>
              {% else %}
                <a href="{% url accounts:logout %}" title="Logout">{{ user }}</a>
              {% endif %}
              </li>
            </ul>
            <form class="navbar-search pull-right">
              <input type="text" id="st-search-input" class="search-query" placeholder="Search"/>
            </form>
          </div>
        </div>
      </div>
    </header>

    {% block messages %}
      {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
          {{ message }}
        </div>
      {% endfor %}
    {% endblock %}

    {% block content %}{% endblock %}

    <footer class="footer">
      <p class="pull-right"><a href="#">Back to top</a></p>
      <p>
        Features and Issues <a
          href="https://trello.com/board/wotmad/4f723dc355adc061384f2976">on Trello</a>;
        Source code on <a href="https://github.com/avidal/wotmad/">Github</a>.
      </p>
    </footer>
  </div>
  {% endblock %}

  {% block javascript_intro %}
  <script>
    window.ST_RENDER_STYLE = "new_page";
  </script>
  {% endblock %}
  <script src="//login.persona.org/include.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/select2/3.4.1/select2.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/URI.js/1.7.2/URI.min.js"></script>
  <script>
  var uri = URI();

  var Swiftype = window.Swiftype || {};
  (function() {
    Swiftype.key = 'Fcwjpc9NxAShMCXnysXr';
    Swiftype.inputElement = '#st-search-input';
    Swiftype.resultContainingElement = '#st-results-container';
    Swiftype.attachElement = '#st-search-input';
    Swiftype.renderStyle = window.ST_RENDER_STYLE || "new_page";
    Swiftype.resultPageURL = "{% url search %}";

    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.async = true;
    script.src = "//swiftype.com/embed.js";
    var entry = document.getElementsByTagName('script')[0];
    entry.parentNode.insertBefore(script, entry);
  }());

  $(document).ready(function() {
    $('#browserid').bind('click', function(e) {
      e.preventDefault();
      navigator.id.getVerifiedEmail(function(assertion) {
          if (assertion) {
            var $e = $('#id_assertion');
            $e.val(assertion.toString());
            $e.parent().submit();
          }
      });
    });
    $('.select2').select2();
  });
  </script>
  {% block javascript %}{% endblock %}

</body>
</html>
